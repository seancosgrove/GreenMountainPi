# Sean Cosgrove and Emery Wollerscheid
# Green Mountain Pi
# CS 121 Final Project
# updateAntimalware.py

import os
import time

def main():

    # initialize cooldown in between commands
    cmdCooldown = 3
    printCooldown = 1

    print("Would you like to run an antimalware scan? (y/n)")
    response = str(input())
    if (str.lower(response) == "y"):
        print("|==============================|")
        antiScanCmd = "rkhunter --check"
        os.system(antiScanCmd)
        time.sleep(cmdCooldown)
        print("Rootkit hunter scan complete")
        print("|==============================|")
        time.sleep(printCooldown)
    else:
        print("Loading most recent scan...")
        time.sleep(printCooldown)

    # initialize command strings to run python
    getRootkitHunterLogCmd = "python3 ../anti/getRootkitHunterLog.py"
    readRootkitHunterLogCmd = "python3 ../anti/readRootkitHunterLog.py"

    # execute getRootkitHunterLog.py
    print("Getting rkhunter.log...")
    time.sleep(printCooldown)
    os.system(getRootkitHunterLogCmd)
    time.sleep(cmdCooldown) # command cooldown

    # execute readRootkitHunterLog.py
    print("Reading to rootkitHunterLog.txt...")
    time.sleep(printCooldown)
    os.system(readRootkitHunterLogCmd)
    time.sleep(cmdCooldown)
    print("Finished writing to log text file") # build success
    time.sleep(printCooldown)

main()
